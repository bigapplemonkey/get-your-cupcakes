!function(){"use strict";function a(){var a=[{featureType:"landscape.man_made",elementType:"geometry",stylers:[{color:"#fdf9eb"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#def2d5"}]},{featureType:"landscape.natural.terrain",elementType:"geometry",stylers:[{color:"#def2d5",visibility:"off"}]},{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"poi.business",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"poi.medical",elementType:"geometry",stylers:[{color:"#fbd3da"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#def2d5"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"on"}]},{featureType:"road",elementType:"labels.icon",stylers:[{visibility:"on"}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffe15f"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#efd151"}]},{featureType:"road.arterial",elementType:"geometry.fill",stylers:[{color:"#ffffff"}]},{featureType:"road.local",elementType:"geometry.fill",stylers:[{color:"black"}]},{featureType:"transit.station.airport",elementType:"geometry.fill",stylers:[{color:"#cfb2db"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#b1dafa"}]}],d=new google.maps.StyledMapType(a,{name:"Styled Map"}),e=model.position.center;n=new google.maps.Map($("#map")[0],{center:e,maxZoom:15,minZoom:9,mapTypeControl:!1,styles:a}),n.mapTypes.set("map_style",d),o=new google.maps.InfoWindow,p=c(!0),q=c(!1),r=c(!0,!0),s=c(!1,!0);var f={createMarker:b,displayInfobox:h,switchIcon:i,displayMarkers:k,closeInfoWindow:g,centerMap:j};m(e,function(a,b){"OK"===b?f.currentCenter=a:f.currentCenter={center:e,inRatio:!0,name:model.position.name},window.googleMap=f})}function b(a,b){var c={map:n,position:a.point,title:a.name,visible:!1,animation:google.maps.Animation.DROP},d=new google.maps.Marker(c);return b?d.setIcon(q):d.setIcon(p),e(d),d}function c(a,b){var c="f381a7";b&&(c="64B5F6");var d="https://chart.googleapis.com/chart?chst=d_map_pin_icon&chld=star|"+c+"|FFFFFF";a||(d="https://chart.googleapis.com/chart?chst=d_map_spin&chld=0.4|0|"+c+"|14|_|%E2%80%A2");var e=new google.maps.MarkerImage(d,new google.maps.Size(21,34),new google.maps.Point(0,0),new google.maps.Point(10,34),new google.maps.Size(21,34));return e}function d(a){t&&(t.icon.url.indexOf("star")<0?t.setIcon(q):t.setIcon(p)),t=a,t.icon.url.indexOf("star")<0?t.setIcon(s):t.setIcon(r)}function e(a){a.addListener("click",function(){d(a),view.showInList(a.placeID)}),a.addListener("mouseover",function(){f(this,o)}),a.addListener("mouseout",function(){o.close()})}function f(a,b){b.marker!=a?(b.marker=a,b.setContent('<div class="flex-container"><img class="info__image" src="images/smily-cupcake35.png" alt=""><h5 class="info__title">'+a.title+"</h5></div>"),b.open(n,a),b.addListener("closeclick",function(){b.marker=null})):b.open(n,a)}function g(){o.close()}function h(a){d(a),f(a,o),n.panTo(a.getPosition())}function i(a,b){a.setVisible(!1),b?a.setIcon(p):a.setIcon(q)}function j(a){n.setCenter(a?a:n.center),n.setZoom(10)}function k(a,b){if(g(),t&&(t.icon.url.indexOf("star")<0?t.setIcon(q):t.setIcon(p)),a.forEach(function(a){a.setVisible(!1)}),b.length>0){var c=new google.maps.LatLngBounds;b.forEach(function(a){a.setVisible(!0),c.extend(a.position)}),n.fitBounds(c)}else j()}function l(a,b){var c=new google.maps.Geocoder;c.geocode({location:a},function(a,c){if("OK"===c){if(a[1]){for(var d,e,f,g=null,h=null,i=null,j=0,k=a.length;j<k;j+=1){var l=a[j];if(h||"locality"!==l.types[0]){if(i||"administrative_area_level_1"!==l.types[0])g||"country"!==l.types[0]||(g=l.address_components[0].long_name);else for(d=0,e=l.address_components.length;d<e;d+=1)if(f=l.address_components[d],"administrative_area_level_1"===f.types[0]&&"political"===f.types[1]){i=f.long_name;break}}else for(d=0,e=l.address_components.length;d<e;d+=1)if(f=l.address_components[d],"locality"===f.types[0]){h=f.long_name;break}if(h&&g)break}b(h+", "+i+", "+g,"OK")}}else viewModel.errorHandling("We're currently experiencing issues retrieving your location. Please try again later.")})}function m(a,b){var c=null;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(d){var e={lat:d.coords.latitude,lng:d.coords.longitude};c={center:e,inRatio:!0};var f=new google.maps.LatLng(e.lat,e.lng),g=new google.maps.LatLng(a.lat,a.lng),h=google.maps.geometry.spherical.computeDistanceBetween(g,f);h>14700&&(c.inRatio=!1),l(e,function(a,d){c.name=a,c.name.indexOf("United States")<0&&(c.inRatio=!0),b(c,"OK")})},function(){viewModel.errorHandling("We're currently experiencing issues retrieving your location. Please try again later.")}):b(void 0,"NOT_SUPPORTED")}var n,o,p,q,r,s,t;window.initMap=a}();
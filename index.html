<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Cupcake Map</title>
    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href='https://fonts.googleapis.com/css?family=Fredoka+One' rel='stylesheet' type='text/css'>
    <!--Import materialize.css-->
    <link type="text/css" rel="stylesheet" href="css/materialize.min.css" media="screen,projection" />
    <!--Import custom css-->
    <link rel="stylesheet" href="css/styles.css">
</head>

<body>
    <div class="row navigation z-depth-1">
        <div class="col s12 logo">
            <h4 class="logo__title center-align">Cupcake finder!</h4>
            <nav class="search red lighten-4">
                <div class="nav-wrapper">
                    <form>
                        <div class="input-field">
                            <input id="search" type="search" data-bind="value: searchString, valueUpdate: 'keyup'" required>
                            <label for="search"><i class="material-icons">search</i></label>
                            <i class="material-icons">close</i>
                        </div>
                    </form>
                </div>
            </nav>
        </div>
        <div class="col s12 accordion">
            <ul class="collapsible navigation__content z-depth-0" data-collapsible="accordion">
                <li>
                    <div id="collapsible-header" class="collapsible-header active navigation__content__header">
                        <div><i id="accordion_icon" class="material-icons">expand_more</i></div>
                    </div>
                    <div class="collapsible-body navigation__content__body grey lighten-4">
                        <!-- Dropdown Structure -->
                        <ul id="dropdown1" class="dropdown-content" data-bind="foreach: sortOptions">
                            <li>
                                <a href="#" data-bind="text: $data.optionDisplay, click: function(){ viewModel.sortPlacesBy($index())}"></a>
                            </li>
                        </ul>
                        <div class="navbar-fixed">
                            <nav class="red lighten-4">
                                <div class="nav-wrapper">
                                    <ul class="right hide-on-med-and-down">
                                        <li>
                                            <ul class="tabs red lighten-4">
                                                <li class="tab"><a class="active" href="#favorites">Favorites<div id="favoriteCount" class="chip" data-bind="text: favoriteLocations().length"></div></a></li>
                                                <li class="tab"><a href="#near">Near By<div  id="nearCount" class="chip" data-bind="text: (places().length - favoriteLocations().length)"></div></a></li>
                                            </ul>
                                        </li>
                                        <li><a class="dropdown-button" href="#!" data-activates="dropdown1">Sort By<i class="material-icons right">arrow_drop_down</i></a></li>
                                    </ul>
                                </div>
                            </nav>
                        </div>
                        <div id="favorites" class="col s12 grey lighten-5">
                            <ul class="collapsible popout" data-collapsible="accordion" data-bind="template: {  name: 'place-list', foreach: visiblePlaces}">
                            </ul>
                        </div>
                        <div id="near" class="col s12 grey lighten-5">
                            <ul class="collapsible popout" data-collapsible="accordion" data-bind="template: {  name: 'place-list', foreach: visiblePlaces}">
                            </ul>
                        </div>
                        <img src="images/smily-cupcake_7.png" alt="" class="navigation__footer__image1 make-block">
                        <img src="images/Powered-by-Foursquare.png" alt="" class="navigation__footer__image2 make-block">
                    </div>
                </li>
            </ul>
        </div>
    </div>
    <main>
        <div id="map"></div>
    </main>
    <!--List Template-->
    <script type="text/html" id="place-list">
        <li data-bind="event: { mouseover: $parent.highlight} ">
            <div class="collapsible-header flex-container " data-bind="click: $parent.initViewElements">
                <img class="card__image " src=" " alt="Cupcake store " data-bind="attr: {src: photos()[0]} ">
                <div class="card__details flex-container ">
                    <div class="teal-text text-lighten-1 card__number " data-bind="text: '#' + ($index() + 1) "></div>
                    <h5 class="font-grey card__title " data-bind="text: title "></h5>
                    <a href="#! " class="secondary-content " data-bind="visible: $parent.isTab1Selected, click: $parent.removeFromFavorites "><i class="material-icons ">grade</i></a>
                    <a href="#! " class="secondary-content " data-bind="visible: !$parent.isTab1Selected(), click: $parent.addToFavorites "><i class="material-icons ">grade</i></a>
                    <div class="card__number"></div>
                    <div class="card__ratings ">
                        <span class="red-text text-lighten-2 " data-bind="text: rating().toFixed(1) "></span><span class="font-grey "> Rating | </span>
                        <span class="teal-text text-lighten-1 " data-bind="text: likes "></span><span class="font-grey "> Likes </span>
                    </div>
                    <div class="card__price ">
                        <!-- ko if: priceLevel -->
                        <span class="card__price__text badge z-depth-1 " data-bind="html: priceLevel() + '<i class=&quot;card__price__icon material-icons&quot;>attach_money</i>' "></span>
                        <!-- /ko -->
                    </div>
                    <div class="card__comment flex-container ">
                        <!-- ko if: review -->
                        <div class="card__comment__icon "><i class="material-icons ">account_circle</i></div>
                        <div class="card__comment__text " data-bind="text: review "></div>
                        <!-- /ko -->
                    </div>
                </div>
            </div>
            <div class="collapsible-body card__content ">
                <div class="flex-container">
                    <div class="card__content__address" data-bind="text: address "></div>
                    <div class="card__content__attributes">
                        <i class="material-icons card__content__attribute teal-text text-lighten-1 tooltipped " data-bind="visible: creditcards " data-position="top " data-tooltip="Credit cards ">credit_card</i>
                        <i class="material-icons card__content__attribute teal-text text-lighten-1 tooltipped " data-bind="visible: wifi " data-position="top " data-tooltip="Wi-Fi ">wifi</i>
                        <i class="material-icons card__content__attribute teal-text text-lighten-1 tooltipped " data-bind="visible: delivery " data-position="top " data-tooltip="Delivery ">local_shipping</i>
                        <i class="material-icons card__content__attribute teal-text text-lighten-1 tooltipped " data-bind="visible: outdoorseating " data-position="top " data-tooltip="Outdoor seating ">beach_access</i>
                    </div>
                    <div class="card__contacts flex-container ">
                        <div class="card__contacts__icon "><i class="material-icons ">web</i></div>
                        <div class="card__contacts__text ">
                            <a href="" target="_blank" data-bind="attr: { href: website, id: placeID}, text: website"></a>
                        </div>
                        <div class="card__contacts__icon "><i class="material-icons ">phone</i></div>
                        <div class="card__contacts__text ">
                            <a href="" data-bind="attr: { href: 'tel:+1' + phone()}, text: formattedPhone"></a>
                        </div>
                        <div class="card__contacts__social">
                            <a href="" target="_blank" data-bind="visible: facebook, attr: { href: 'http://facebook.com/' + facebook()} "><span class="social-icon zocial-facebook"></span></a>
                            <a href="" target="_blank" data-bind="visible: twitter, attr: { href: 'http://twitter.com/' + twitter()}"><span class="social-icon zocial-twitter"></span></a>
                        </div>
                    </div>
                </div>
                <div class=" ">
                    <!-- ko if: comments -->
                    <div class="card__comments flex-container " data-bind="foreach: comments ">
                        <div class="card__comments__icon "><i class="material-icons ">account_circle</i></div>
                        <div class="card__comments__text " data-bind="text: $data "></div>
                    </div>
                    <!-- /ko -->
                </div>
            </div>
        </li>
    </script>
    <!--Import jQuery-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js "></script>
    <!--Import materialize.js-->
    <script type="text/javascript " src="js/materialize.min.js "></script>
    <!--Import knockout.js-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/knockout/3.4.0/knockout-min.js "></script>
    <!--Import custom js -->
    <script src="js/model.js "></script>
    <script src="js/view.js "></script>
    <script src="js/viewModel.js "></script>
    <script src="js/map.js "></script>
    <!--Import Google Map API -->
    <script asyn src="https://maps.googleapis.com/maps/api/js?libraries=places&key=AIzaSyADPmIYSbEP83lk3eqoZk0YBHdr8mkASHw&v=3&callback=initMap "></script>
</body>

</html>
